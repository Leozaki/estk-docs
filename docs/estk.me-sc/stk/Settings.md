# Settings

提供了一些修改 eSTK.me 卡片行为的功能。

## ARA-M SHA-1

ARA-M 作为智能卡的一个特殊属性，用于在现代操作系统上控制何种用户应用可以访问智能卡接口。目前已经在支持 OMAPI 的 Android 操作系统上广泛应用。智能卡 ARA-M 通过开发者证书的 SHA-1 或者 SHA-256 的值来通知操作系统来自哪个开发者的应用可以访问自身。

修改 ARA-M SHA-1 是一个需要额外注意操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。
3. 不正确的 ARA-M SHA-1 的值会导致 LPA 应用无法管理卡片，需要确保你可以正常访问 STK 或者具有 PCSC 读卡器

点击该菜单项后，会自动执行如下步骤

1. 弹出输入 SHA-1 值的输入框和提示文字
2. 弹出修改成功提示框
3. 向终端设备发起重启 eSTK.me 本身的指令。

::: warning
当错误地修改了 ARA-M SHA-1 值，又恰好无法正常访问 STK 菜单，那么你需要构造如下 APDU 命令以通过 PCSC 读卡器来设置 ARA-M SHA-1 的值


```
80 14 00 00 30 81 03 E3 23 00 8D 29 00 61 38 62 65 33 63 31 30 31 66 38 34 30 63 35 30 32 35 63 38 61 33 64 38 64 61 66 35 35 33 31 64 64 39 31 62 31 31 33 34
```

其中，固定头部为

```
80 14 00 00 30 81 03 E3 23 00 8D 29 00
```

这一部分代表了接下来要发送40个 ASCII 字符，并作为 ARA-M 的 SHA-1 值来处理

```
61 38 62 65 33 63 31 30 31 66 38 34 30 63 35 30 32 35 63 38 61 33 64 38 64 61 66 35 35 33 31 64 64 39 31 62 31 31 33 34
```

这一部分是 SHA-1 字符串的十六进制值，即 "A8BE3C101F840C5025C8A3D8DAF5531DD91B1134" 这个字符串的十六进制表示。

:::

## Virtual EID

配置一个虚拟的EID有很多理由，可能为了规避恶意软件的追踪，为了验证某种技术的可行性，或者仅仅是找乐子，此功能可以使 eUICC 管理软件(LPA)获取到用户指定的值而并非 eSE 中永久固化的序列号。

需要注意的是，当与 Profile 下载服务器(SM-DP+)进行通信时，由于 GSMA PKI 证书系统的存在，虚拟EID无法工作，SM-DP+ 总是能获取到 eUICC 的真实 EID 序列号。

设置 Virtual EID 是一个需要额外注意操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。
3. 特殊的 EID 可能会使一些管理软件异常，确保你可以正常访问 STK 菜单时再进行更改

点击该菜单项后，会自动执行如下步骤

1. 弹出 EID 输入框和提示文字，如果你什么都不输入，意味着关闭该功能
2. 弹出修改成功提示框
3. 向终端设备发起重启 eSTK.me 本身的指令。

::: warning
Virtual EID 功能默认仅针对 ISD-R 域有效，如果你需要覆盖 ECASD 域的 EID 读取行为，需要进一步参考 "[ECASD Mode](Settings.md#ecasd-mode)"
:::

## ATR Mode

ATR是智能卡发送给终端的第一段数据，其中包含了从通信方式到数据结构的多种关键信息。虽然 eSTK.me 具有完全自定义ATR的能力，但错误的ATR可以轻易的造成软件损坏甚至硬件永久损伤，最终用户仅可在经过安全测试的内置ATR数据中进行选择。

切换 ATR 设置是一个可靠操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。

“ATR 选择菜单” 具有 "< >" 或 "<\*>" 字符表示的前缀，其中 "<\*>" 前缀代表的是当前激活的配置。

当前可供选择的 ATR 模式

1. Default：这个是默认的 ATR 数据，它包含了除通讯时序约束外，包含了 eUICC 功能的通告。
2. Legacy：在此模式下，将在 Default 模式的基础上不再通告 eUICC 功能。

## ISD-R Mode

ISD-R 是 LPA 与 eUICC 进行交互的主要接口，配置文件的管理（包括下载，切换，删除，重命名等）、卡片信息的获取，均以该管理域为入口。

修改 ISD-R 的工作模式需要额外注意操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。
3. 非预期的 ISD-R 工作模式会导致 LPA 应用无法管理卡片，需要确保你可以正常访问 STK 或者具有PCSC 读卡器

"ISD-R 选择菜单" 具有 "< >" 或 "<\*>" 字符表示的前缀，其中 "<\*>" 前缀代表的是当前激活的配置。

当前可供选择的ISD-R模式

1. Shared：默认模式，ISD-R 域可被共享访问，所有访问请求均被允许。
2. Exclusive：独占访问模式，必须等待当前操作主动让出才可接受其他访问请求。
3. Disabled：禁用模式，在此状态下终端设备无法访问 ISD-R 域。

## ECASD Mode

ECASD 是一个特殊的管理域，与 ISD-R 不同，ECASD 保存着 eUICC 最关键的证书与密钥数据，可以理解为是 eUICC 的后端，通常情况下，除了 eSE 的制造方，无需访问 ECASD 域。

配置 ECASD 是一个可靠操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。

"ECASD 选择菜单" 具有 "< >" 或 "<\*>" 字符表示的前缀，其中 "<\*>" 前缀代表的是当前激活的配置。

当前可供选择的 ECASD 模式

1. Enabled：默认模式，ECASD 被正常访问。
2. Virtual EID：应用虚拟EID模式，即使是通过 ECASD 也无法读取真实 EID。
3. Disabled：禁用模式，在此状态下终端设备无法访问 ECASD 域。

## SKU Mode

## Hint Mode

::: warning
本功能于 1.2.3.1 版本固件加入。
:::

本功能用于开启或者关闭欢迎语。

配置 Hint Mode 是一个可靠操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。

当前可供选择的 Hint 模式

1. Enabled : 启用欢迎语功能（默认）
2. Disabled : 禁用欢迎语功能